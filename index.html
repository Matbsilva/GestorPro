<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Orçamentos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <!-- Barra Lateral (Central de Comando) -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>GestorPro</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active">Início</a>
                <a href="#" class="nav-item">Clientes</a>
                <a href="#" class="nav-item">Orçamentos</a>
                <a href="#" class="nav-item">Relatórios</a>
                <a href="#" class="nav-item">Configurações</a>
            </nav>
        </aside>

        <!-- Conteúdo Principal (A Lousa) -->
        <main class="main-content">
            <header class="main-header">
                <h1>Dashboard de Orçamentos</h1>
                <button class="add-button">+ Novo Orçamento</button>
            </header>

            <div class="kanban-board">
                <!-- Coluna 1: Nova Entrada -->
                <div class="kanban-column">
                    <h3 class="column-title">Nova Entrada</h3>
                </div>

                <!-- Coluna 2: Aguardando Respostas -->
                <div class="kanban-column">
                    <h3 class="column-title">Aguardando Respostas</h3>
                </div>

                <!-- Coluna 3: Enviado -->
                <div class="kanban-column">
                    <h3 class="column-title">Enviado</h3>
                </div>

                <!-- Coluna 4: Aprovado -->
                <div class="kanban-column">
                    <h3 class="column-title">Aprovado</h3>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para Adicionar Orçamento -->
    <div id="orcamento-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Novo Orçamento</h2>
            <form id="orcamento-form">
                <label for="project-name">Nome do Projeto:</label>
                <input type="text" id="project-name" name="project-name" required>

                <div style="position: relative;">
                    <label for="client-name">Nome do Cliente:</label>
                    <input type="text" id="client-name" name="client-name" required autocomplete="off">
                    <div id="sugestoes-cliente"></div>
                </div>

                <label for="entry-date">Data de Entrada:</label>
                <input type="date" id="entry-date" name="entry-date" required>

                <label for="deadline-date">Data Limite para Envio:</label>
                <input type="date" id="deadline-date" name="deadline-date" required>

                <label for="prioridade-input">Prioridade:</label>
                <select id="prioridade-input" name="prioridade">
                    <option value="Alta">Alta</option>
                    <option value="Média" selected>Média</option>
                    <option value="Baixa">Baixa</option>
                </select>

                <button type="submit" class="submit-button">Avançar</button>
            </form>
        </div>
    </div>

    <!-- Modal para Gerar Dúvidas -->
    <div id="duvidas-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Analisar Escopo e Gerar Dúvidas</h2>
            
            <label for="scope-input">Cole o escopo do serviço:</label>
            <textarea id="scope-input" rows="8"></textarea>
            
            <button id="generate-doubts-btn" class="submit-button">Gerar Dúvidas</button>

            <hr>

            <div id="duvidas-geradas-output" class="ai-output-box" placeholder="A lista de dúvidas completa gerada pela IA aparecerá aqui..."></div>
            <button type="button" id="copiar-duvidas-btn" class="submit-button" style="margin-top: 10px; background-color: #6c757d;">Copiar Dúvidas</button>

            <div id="resumo-container" class="hidden">
                <label for="resumo-output">Resumo para o cliente aparecerá aqui:</label>
                <div id="resumo-output" class="ai-output-box" readonly></div>
            </div>

            <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 20px;">
                <button id="create-card-final-btn" class="submit-button" style="width: 50%;">Criar Card</button>
                <button id="gerar-resumo-btn" type="button" class="submit-button" style="width: 50%; background-color: #17a2b8;">Gerar Resumo para Cliente</button>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Card -->
    <div id="detalhes-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            
            <div class="modal-header-actions">
                <h2 id="detalhes-projeto">Nome do Projeto</h2>
                <div class="header-buttons">
                    <button id="gerar-resumo-detalhes-btn" class="submit-button" style="background-color: #17a2b8;">Gerar Análise</button>
                    <button id="editar-card-btn" class="submit-button">Editar</button>
                    <button id="salvar-card-btn" class="submit-button hidden">Salvar</button>
                </div>
            </div>

            <!-- Modo Visualização -->
            <div id="view-mode">
                <p><strong>Cliente:</strong> <span id="detalhes-cliente"></span></p>
                <p><strong>Prioridade:</strong> <span id="detalhes-prioridade"></span></p>
                <p><strong>Entrada:</strong> <span id="detalhes-entrada"></span> | <strong>Limite:</strong> <span id="detalhes-limite"></span></p>
            </div>

            <!-- Modo Edição (Oculto por padrão) -->
            <div id="edit-mode" class="hidden">
                <input type="text" id="edit-projeto" placeholder="Nome do Projeto">
                <input type="text" id="edit-cliente" placeholder="Nome do Cliente">
                <select id="edit-prioridade">
                    <option value="Alta">Alta</option>
                    <option value="Média">Média</option>
                    <option value="Baixa">Baixa</option>
                </select>
                <input type="date" id="edit-entrada">
                <input type="date" id="edit-limite">
            </div>

            <hr>
            <div style="display: flex; gap: 20px;">
                <div style="flex: 1;">
                    <h3>Escopo do Orçamento</h3>
                    <p id="detalhes-escopo" class="view-mode-field" style="white-space: pre-wrap; background-color: #f9f9f9; padding: 10px; border-radius: 4px; min-height: 100px;"></p>
                    <textarea id="edit-escopo" class="edit-mode-field hidden" style="width: 100%; min-height: 120px;"></textarea>
                </div>
                <div style="flex: 1;">
                    <h3>Dúvidas Pendentes</h3>
                    <p id="detalhes-duvidas" class="view-mode-field" style="white-space: pre-wrap; background-color: #f9f9f9; padding: 10px; border-radius: 4px; min-height: 100px;"></p>
                    <textarea id="edit-duvidas" class="edit-mode-field hidden" style="width: 100%; min-height: 120px;"></textarea>
                </div>
            </div>

            <!-- Seção de Análise da IA (Abas) -->
            <div id="summary-section" class="hidden">
                <hr>
                <div class="summary-header">
                    <div class="tabs-container" id="analysis-tabs">
                        <button class="tab-button active" data-target="analise-completa-pane">Análise Completa</button>
                        <button class="tab-button" data-target="resumo-cliente-pane">Resumo para Cliente</button>
                    </div>
                    <button id="copy-summary-btn" class="submit-button" style="width: auto; margin-top: 0;">Copiar</button>
                </div>

                <div id="summary-loader" class="loader-container hidden">
                    <div class="loader"></div>
                    <p>Analisando o escopo e gerando o resumo...</p>
                </div>

                <div class="tab-content" id="analysis-tabs-content">
                    <div class="tab-pane active" id="analise-completa-pane"></div>
                    <div class="tab-pane" id="resumo-cliente-pane"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>